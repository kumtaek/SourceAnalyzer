# SourceAnalyzer 프로젝트 개요 및 목적

## 프로젝트 배경

### 영향평가의 중요성
현대 소프트웨어 개발에서 **영향평가**는 안전한 시스템 변경을 위한 필수 과정입니다. 하나의 테이블이나 API를 수정할 때 어떤 파일들이 영향받는지 정확히 파악하지 못하면 운영 장애로 이어질 수 있습니다.

### 영향평가 시스템의 필요성
**영향평가**에 특화된 소스 분석 시스템이 필요합니다:

```
영향평가 시나리오:
"USERS 테이블을 수정하면 어떤 파일들이 영향받나?"

필요한 정보:
1. USERS 테이블을 사용하는 모든 SQL 쿼리
2. 해당 쿼리가 포함된 XML 파일  
3. 해당 XML을 호출하는 Java 메서드
4. 해당 메서드가 속한 Java 클래스
5. 해당 클래스를 호출하는 프론트엔드 파일
6. 테이블 간 조인 관계 (어떤 컬럼으로 연결되는가)
```

## 프로젝트 목적

### 핵심 목표
**영향평가에 최적화된 소스 분석 시스템 개발**

### 설계 철학 우선순위 (연관관계 도출 중심)

```mermaid
pie title 설계 철학 우선순위 (연관관계 중심)
    "연관관계 도출 최우선" : 35
    "안전한 Fallback" : 25
    "점진적 완성" : 20
    "80/20 원칙" : 20
```

1. **연관관계 도출 최우선**: 완벽한 파싱보다 관계 추출 우선
2. **안전한 Fallback**: 고급 파싱 실패 시 기본 파싱으로 대체
3. **점진적 완성**: 파일별로 관계를 점진적으로 완성
4. **80/20 원칙**: 80% 일반적 케이스의 안정적 지원 우선

### 시스템 설계 원칙 (연관관계 중심)
```
1순위: 연관관계 도출 최우선
- 완벽한 파싱보다 관계 추출 우선
- 부분적 정보로도 충분한 관계 도출
- 파싱 실패해도 관계는 추출 가능
- 관계가 있으면 에러가 있어도 유용함

2순위: 안전한 Fallback 메커니즘
- 고급 파싱 실패 시 기본 파싱으로 대체
- 개별 파일 실패가 전체 시스템에 영향 없음
- 80/20 원칙: 80% 일반적 케이스의 안정적 지원
- 설정 기반 제한으로 안전장치 확보

3순위: 점진적 관계 완성
- 파일별로 관계를 점진적으로 완성
- 메모리 캐싱 대신 스트리밍 방식
- 배치 단위로 관계 정립 및 즉시 저장
- 대용량 프로젝트에서도 안정적 처리

4순위: 실용적 접근
- 이론적 최적화보다 실무적 효용성 추구
- 사용자가 체감할 수 있는 개선 효과 우선
- 복잡한 기술보다 단순하고 확실한 개선
- 즉시 적용 가능한 실질적 해결책
```

## 시스템 범위

### 분석 대상 비율

```mermaid
pie title 분석 대상 파일 유형별 비중
    "Java 파일" : 35
    "XML 파일" : 20
    "JSP/JSX/Vue 파일" : 25
    "JPA Entity/Config" : 15
    "CSV 파일" : 5
```

- **Java 파일**: 클래스, 메서드, API 매핑, 문자열 SQL
- **XML 파일**: MyBatis 매퍼, SQL 쿼리, 동적 SQL, JPA 설정
- **JSP/JSX/Vue 파일**: 프론트엔드 페이지, API 호출, 컴포넌트
- **JPA Entity/Config**: JPA 엔티티, Repository, 설정 파일
- **CSV 파일**: 데이터베이스 스키마 (테이블, 컬럼)

### 생성할 메타데이터
```
고정 데이터 (CSV/파일 기반):
- projects: 프로젝트 정보
- files: 소스 파일 목록
- tables: 실제 DB 스키마 테이블  
- columns: 실제 DB 스키마 컬럼

동적 데이터 (소스 분석 기반):
- components: 클래스, 메서드, 쿼리, API 등 (INFERRED 포함)
- relationships: 컴포넌트 간 관계 (호출, 사용, 조인 등)
```

### 핵심 관계 유형
1. **파일 → 클래스**: Java 파일에 포함된 클래스들
2. **클래스 → 메서드**: 클래스에 속한 메서드들  
3. **메서드 → 쿼리**: 메서드에서 호출하는 SQL 쿼리
4. **쿼리 → 테이블**: 쿼리에서 접근하는 테이블
5. **테이블 → 컬럼**: 테이블에 속한 컬럼들
6. **테이블 ↔ 테이블**: 조인 관계 (어떤 컬럼으로 연결)
7. **프론트엔드 → API**: JSP/JSX/Vue에서 호출하는 API
8. **JPA Entity → 테이블**: JPA 엔티티와 데이터베이스 테이블 매핑
9. **JPA Repository → 쿼리**: JPA Repository 메서드와 생성되는 SQL 쿼리
10. **Vue 컴포넌트 → API**: Vue.js 컴포넌트에서 REST API 호출

## 시스템 목표

### 시스템 목표 우선순위 매트릭스

```mermaid
graph TD
    subgraph "최우선 목표 (정확도 중심)"
        A["누락률 0%<br/>절대 누락 없음"]
        B["추적 깊이<br/>전체 체인 추적"]
        C["관계 명확성<br/>상세한 조인 조건"]
    end
    
    subgraph "균형 목표 (정확도+성능)"
        D["직관적 설계<br/>이해하기 쉬운 구조"]
        E["분석 시간 2분<br/>적절한 처리 속도"]
    end
    
    subgraph "성능 목표 (효율성 중심)"
        F["메모리 100MB<br/>제한된 자원 사용"]
    end
    
    A --> D
    B --> D
    C --> E
    D --> F
    E --> F
    
    style A fill:#e8f5e8
    style B fill:#e8f5e8
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#e3f2fd
```

### 영향평가 정확도 목표
- **누락률**: 0% (절대 누락 없음 - 100% 이상 추출)
- **추적 깊이**: 프론트엔드부터 데이터베이스까지 전체 호출 체인
- **관계 명확성**: 테이블 간 조인 조건까지 상세 추적
- **오탐 허용**: 의심스러우면 포함 (과도하지 않은 선에서)

### 시스템 성능 목표  
- **분석 시간**: 중간 규모 프로젝트 2분 이내 완료
- **메모리 사용**: 100MB 이하
- **코드 복잡도**: 적절한 수준 (목적 달성에 필요한 만큼)

### 시스템 특성 목표
- **직관적 설계**: 신규 개발자도 빠른 이해 가능
- **확장성**: 새로운 프로젝트 추가 용이
- **안정성**: 부분 실패해도 정보 추출 가능

## 성공 기준

### 개발 단계별 타임라인 (연관관계 중심)

```mermaid
gantt
    title 프로젝트 개발 타임라인 (연관관계 중심)
    dateFormat YYYY-MM-DD
    axisFormat %m월
    
    section 1단계설계
    프로젝트계획수립        :done, plan, 2025-01-01, 10d
    요구사항분석            :done, req, 2025-01-11, 14d
    연관관계중심아키텍처설계  :arch, 2025-01-25, 15d
    
    section 2단계기본구현
    파일스캔구현           :scan, 2025-02-09, 12d
    메타데이터생성          :meta, 2025-02-21, 10d
    XMLJava파싱+INFERRED생성 :parse, 2025-03-03, 18d
    
    section 3단계고도화
    INFERRED진화시스템      :evolution, 2025-03-21, 15d
    스트리밍관계분석        :streaming, 2025-04-05, 20d
    플러그인아키텍처        :plugin, 2025-04-25, 12d
    
    section 4단계최적화
    Fallback메커니즘        :fallback, 2025-05-07, 10d
    테스트및검증           :test, 2025-05-17, 14d
    운영준비               :deploy, 2025-05-31, 8d
```

### 정량적 목표 (연관관계 중심)
- **처리 시간**: 중간 규모 프로젝트 3분 이내 완료 (스트리밍 처리로 안정성 우선)
- **관계 도출률**: 95% 이상 (완벽한 파싱보다 관계 추출 우선)
- **Fallback 성공률**: 100% (고급 파싱 실패 시 기본 파싱으로 대체)
- **메모리 사용량**: 200MB 이하 (스트리밍 처리로 대용량 프로젝트 지원)
- **INFERRED 진화율**: 80% 이상 (INFERRED 객체가 정식 객체로 진화)

### 정성적 목표 (연관관계 중심)
- **직관적 이해**: 신규 개발자도 1일 내 이해 가능 (연관관계 중심 설계)
- **확장 용이성**: 새로운 프로젝트 추가 30분 이내 (플러그인 아키텍처)
- **영향평가 실용성**: 실제 운영 환경에서 활용 가능 (INFERRED 진화 메커니즘)
- **안정성**: 부분 실패해도 관계 추출 지속 (Fallback 메커니즘)
- **확장성**: 대용량 기업용 프로젝트 지원 (스트리밍 처리)

---

**작성자**: SourceAnalyzer Team  
**작성일**: 2025-09-19  
**문서 버전**: 1.0  
**다음 문서**: [03_시스템_아키텍처_설계.md](./03_시스템_아키텍처_설계.md)
