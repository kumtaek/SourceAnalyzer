<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SourceAnalyzer - ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; text-align: center; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .metric-card { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; text-align: center; }
        .metric-number { font-size: 2.5em; font-weight: bold; margin: 10px 0; }
        .metric-label { font-size: 1.1em; opacity: 0.9; }
        .chart-container { height: 300px; position: relative; }
        .filter-section { background: #e8f4f8; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .filter-row { display: flex; gap: 15px; align-items: center; margin: 10px 0; flex-wrap: wrap; }
        .filter-row select, .filter-row input { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .apply-filter { background: #007bff; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; }
        .top-items { max-height: 250px; overflow-y: auto; }
        .top-item { display: flex; justify-content: space-between; padding: 8px; margin: 5px 0; background: #f8f9fa; border-radius: 3px; }
        .risk-critical { border-left: 4px solid #dc3545; background: #fff5f5; }
        .risk-warning { border-left: 4px solid #ffc107; background: #fffbf0; }
        .risk-normal { border-left: 4px solid #28a745; background: #f8fff8; }
        .pagination { display: flex; justify-content: center; gap: 10px; margin: 15px 0; }
        .page-btn { padding: 8px 12px; border: 1px solid #ddd; background: white; cursor: pointer; border-radius: 3px; }
        .page-btn.active { background: #007bff; color: white; }
        .search-box { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ</h1>
        <p>EnterpriseApp í”„ë¡œì íŠ¸ | ìƒì„±ì¼: 2025-09-20 15:30:25</p>
        <p><strong>ê·œëª¨</strong>: íŒŒì¼ 2,847ê°œ | ì»´í¬ë„ŒíŠ¸ 15,234ê°œ | í…Œì´ë¸” 156ê°œ</p>
    </div>

    <div class="dashboard-grid">
        <!-- ì „ì²´ í†µê³„ (í™•ì¥ ê°€ëŠ¥í•œ ë©”íŠ¸ë¦­) -->
        <div class="card metric-card">
            <div class="metric-number">15,234</div>
            <div class="metric-label">ì´ ì»´í¬ë„ŒíŠ¸</div>
        </div>
        
        <div class="card metric-card">
            <div class="metric-number">2,847</div>
            <div class="metric-label">ì´ íŒŒì¼</div>
        </div>
        
        <div class="card metric-card">
            <div class="metric-number">156</div>
            <div class="metric-label">DB í…Œì´ë¸”</div>
        </div>
        
        <div class="card metric-card">
            <div class="metric-number">1,245</div>
            <div class="metric-label">API ì—”ë“œí¬ì¸íŠ¸</div>
        </div>

        <!-- ìŠ¤ë§ˆíŠ¸ í•„í„°ë§ì´ ê°€ëŠ¥í•œ íŒŒì¼ ë¶„í¬ -->
        <div class="card">
            <h3>ğŸ“ íŒŒì¼ íƒ€ì… ë¶„í¬ (í•„í„°ë§ ê°€ëŠ¥)</h3>
            
            <div class="filter-section">
                <div class="filter-row">
                    <label><strong>ëª¨ë“ˆ ì„ íƒ:</strong></label>
                    <select id="moduleFilter">
                        <option value="all">ì „ì²´ ëª¨ë“ˆ</option>
                        <option value="user">ì‚¬ìš©ì ê´€ë¦¬</option>
                        <option value="product">ìƒí’ˆ ê´€ë¦¬</option>
                        <option value="order">ì£¼ë¬¸ ì²˜ë¦¬</option>
                        <option value="admin">ê´€ë¦¬ì</option>
                    </select>
                    
                    <label><strong>ë ˆì´ì–´:</strong></label>
                    <select id="layerFilter">
                        <option value="all">ì „ì²´</option>
                        <option value="frontend">Frontend</option>
                        <option value="backend">Backend</option>
                        <option value="data">Data</option>
                    </select>
                    
                    <button class="apply-filter" onclick="applyDashboardFilter()">ğŸ” ì ìš©</button>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="scalableFileChart"></canvas>
            </div>
        </div>

        <!-- TOP N ë°©ì‹ì˜ í•«ìŠ¤íŒŸ -->
        <div class="card">
            <h3>ğŸ”¥ í•«ìŠ¤íŒŸ TOP 20 (í˜ì´ì§€ë„¤ì´ì…˜)</h3>
            
            <input type="text" class="search-box" placeholder="ì»´í¬ë„ŒíŠ¸ëª… ê²€ìƒ‰..." onkeyup="searchComponents(this.value)">
            
            <div class="top-items" id="hotspotList">
                <div class="top-item risk-critical">
                    <span><strong>OrderProcessingService.processComplexOrder()</strong></span>
                    <span>ğŸš¨ 347íšŒ í˜¸ì¶œ</span>
                </div>
                <div class="top-item risk-critical">
                    <span><strong>UserAuthenticationService.authenticate()</strong></span>
                    <span>ğŸš¨ 289íšŒ í˜¸ì¶œ</span>
                </div>
                <div class="top-item risk-warning">
                    <span><strong>ProductSearchService.searchProducts()</strong></span>
                    <span>âš ï¸ 156íšŒ í˜¸ì¶œ</span>
                </div>
                <div class="top-item risk-warning">
                    <span><strong>PaymentProcessingService.processPayment()</strong></span>
                    <span>âš ï¸ 134íšŒ í˜¸ì¶œ</span>
                </div>
                <div class="top-item risk-normal">
                    <span><strong>InventoryService.updateStock()</strong></span>
                    <span>âœ… 89íšŒ í˜¸ì¶œ</span>
                </div>
                <!-- ë” ë§ì€ í•­ëª©ë“¤... -->
            </div>
            
            <div class="pagination">
                <button class="page-btn active" onclick="loadPage(1)">1</button>
                <button class="page-btn" onclick="loadPage(2)">2</button>
                <button class="page-btn" onclick="loadPage(3)">3</button>
                <button class="page-btn" onclick="loadPage(4)">4</button>
                <span>...</span>
                <button class="page-btn" onclick="loadPage(25)">25</button>
            </div>
        </div>

        <!-- ëª¨ë“ˆë³„ ì§‘ê³„ (í™•ì¥ ê°€ëŠ¥) -->
        <div class="card">
            <h3>ğŸ—ï¸ ëª¨ë“ˆë³„ í˜„í™© (ë“œë¦´ë‹¤ìš´ ê°€ëŠ¥)</h3>
            <div class="chart-container">
                <canvas id="moduleBreakdownChart"></canvas>
            </div>
            
            <div style="margin-top: 15px;">
                <button onclick="drillDown('user')" style="margin: 5px; padding: 8px 12px; border: none; background: #007bff; color: white; border-radius: 3px; cursor: pointer;">
                    ì‚¬ìš©ì ëª¨ë“ˆ ìƒì„¸ë³´ê¸°
                </button>
                <button onclick="drillDown('product')" style="margin: 5px; padding: 8px 12px; border: none; background: #28a745; color: white; border-radius: 3px; cursor: pointer;">
                    ìƒí’ˆ ëª¨ë“ˆ ìƒì„¸ë³´ê¸°
                </button>
                <button onclick="drillDown('order')" style="margin: 5px; padding: 8px 12px; border: none; background: #ffc107; color: white; border-radius: 3px; cursor: pointer;">
                    ì£¼ë¬¸ ëª¨ë“ˆ ìƒì„¸ë³´ê¸°
                </button>
            </div>
        </div>

        <!-- ë¬¸ì œ ì˜ì—­ ìš”ì•½ (ìš°ì„ ìˆœìœ„ ê¸°ë°˜) -->
        <div class="card">
            <h3>âš ï¸ ì£¼ì˜ í•„ìš” ì˜ì—­ (ìš°ì„ ìˆœìœ„ë³„)</h3>
            
            <div class="filter-section">
                <div class="filter-row">
                    <label><strong>ë¬¸ì œ ìœ í˜•:</strong></label>
                    <select id="issueTypeFilter">
                        <option value="all">ì „ì²´</option>
                        <option value="complexity">ë³µì¡ë„ ë†’ìŒ</option>
                        <option value="error">íŒŒì‹± ì˜¤ë¥˜</option>
                        <option value="unused">ë¯¸ì‚¬ìš© ì»´í¬ë„ŒíŠ¸</option>
                        <option value="hotspot">ê³¼ë„í•œ í˜¸ì¶œ</option>
                    </select>
                    
                    <label><strong>ì‹¬ê°ë„:</strong></label>
                    <select id="severityFilter">
                        <option value="all">ì „ì²´</option>
                        <option value="critical">ì‹¬ê°</option>
                        <option value="warning">ê²½ê³ </option>
                        <option value="info">ì •ë³´</option>
                    </select>
                </div>
            </div>
            
            <div class="top-items">
                <div class="top-item risk-critical">
                    <div>
                        <strong>ë³µì¡ë„ ì´ˆê³¼</strong><br/>
                        <small>OrderProcessingService.java - 45ê°œ ë©”ì„œë“œ, ë³µì¡ë„ 12.8</small>
                    </div>
                    <span>ğŸš¨ ì‹¬ê°</span>
                </div>
                <div class="top-item risk-critical">
                    <div>
                        <strong>ìˆœí™˜ ì˜ì¡´ì„±</strong><br/>
                        <small>UserService â†” AuthService â†” UserDao</small>
                    </div>
                    <span>ğŸš¨ ì‹¬ê°</span>
                </div>
                <div class="top-item risk-warning">
                    <div>
                        <strong>ê³ ì•„ í…Œì´ë¸”</strong><br/>
                        <small>TEMP_DATA, LOG_ARCHIVE (ì‚¬ìš© ì•ˆë¨)</small>
                    </div>
                    <span>âš ï¸ ê²½ê³ </span>
                </div>
            </div>
        </div>

        <!-- ì„±ëŠ¥ ì§€í‘œ (ëŒ€ê·œëª¨ ê³ ë ¤) -->
        <div class="card">
            <h3>âš¡ ì„±ëŠ¥ ì§€í‘œ</h3>
            <div class="chart-container">
                <canvas id="performanceChart"></canvas>
            </div>
            
            <div style="margin-top: 15px; font-size: 0.9em;">
                <p><strong>ë¶„ì„ ì‹œê°„</strong>: 15ë¶„ 23ì´ˆ (2,847ê°œ íŒŒì¼)</p>
                <p><strong>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰</strong>: 1.2GB (í”¼í¬)</p>
                <p><strong>íŒŒì‹± ì„±ê³µë¥ </strong>: 96.8% (14,747/15,234)</p>
            </div>
        </div>
    </div>

    <script>
        // í™•ì¥ ê°€ëŠ¥í•œ íŒŒì¼ ë¶„í¬ ì°¨íŠ¸
        const fileCtx = document.getElementById('scalableFileChart').getContext('2d');
        let fileChart = new Chart(fileCtx, {
            type: 'doughnut',
            data: {
                labels: ['Java (1,234)', 'JSP (567)', 'XML (345)', 'JSX (234)', 'CSS (156)', 'JS (311)'],
                datasets: [{
                    data: [1234, 567, 345, 234, 156, 311],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((context.parsed * 100) / total).toFixed(1);
                                return `${context.label}: ${percentage}%`;
                            }
                        }
                    }
                },
                onClick: function(event, elements) {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const fileType = ['Java', 'JSP', 'XML', 'JSX', 'CSS', 'JS'][index];
                        drillDownFileType(fileType);
                    }
                }
            }
        });

        // ëª¨ë“ˆë³„ ë¶„ì„ ì°¨íŠ¸ (ë“œë¦´ë‹¤ìš´ ê°€ëŠ¥)
        const moduleCtx = document.getElementById('moduleBreakdownChart').getContext('2d');
        new Chart(moduleCtx, {
            type: 'bar',
            data: {
                labels: ['ì‚¬ìš©ìê´€ë¦¬ (456)', 'ìƒí’ˆê´€ë¦¬ (389)', 'ì£¼ë¬¸ì²˜ë¦¬ (567)', 'ê²°ì œì²˜ë¦¬ (234)', 'ê´€ë¦¬ì (123)'],
                datasets: [{
                    label: 'ì»´í¬ë„ŒíŠ¸ ìˆ˜',
                    data: [456, 389, 567, 234, 123],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF']
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true }
                },
                onClick: function(event, elements) {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const modules = ['user', 'product', 'order', 'payment', 'admin'];
                        drillDown(modules[index]);
                    }
                }
            }
        });

        // ì„±ëŠ¥ ì§€í‘œ ì°¨íŠ¸
        const perfCtx = document.getElementById('performanceChart').getContext('2d');
        new Chart(perfCtx, {
            type: 'line',
            data: {
                labels: ['1K', '5K', '10K', '15K', '20K', '25K'],
                datasets: [{
                    label: 'ë¶„ì„ ì‹œê°„ (ë¶„)',
                    data: [2, 8, 15, 23, 35, 52],
                    borderColor: '#FF6384',
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    fill: true
                }, {
                    label: 'ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (GB)',
                    data: [0.2, 0.6, 1.2, 1.8, 2.5, 3.2],
                    borderColor: '#36A2EB',
                    backgroundColor: 'rgba(54, 162, 235, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { title: { display: true, text: 'ì»´í¬ë„ŒíŠ¸ ìˆ˜' } },
                    y: { beginAtZero: true }
                }
            }
        });

        // ëŒ€ê·œëª¨ ëŒ€ì‘ í•¨ìˆ˜ë“¤
        function applyDashboardFilter() {
            const module = document.getElementById('moduleFilter').value;
            const layer = document.getElementById('layerFilter').value;
            
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë©”íƒ€DB ì¿¼ë¦¬ë¡œ í•„í„°ë§
            alert(`í•„í„° ì ìš©: ëª¨ë“ˆ=${module}, ë ˆì´ì–´=${layer}\n\nì°¨íŠ¸ê°€ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.`);
            
            // ì˜ˆì‹œ: ì‚¬ìš©ì ëª¨ë“ˆë§Œ í•„í„°ë§
            if (module === 'user') {
                fileChart.data.labels = ['Java (234)', 'JSP (89)', 'XML (45)', 'JSX (23)'];
                fileChart.data.datasets[0].data = [234, 89, 45, 23];
                fileChart.update();
            }
        }

        function drillDown(module) {
            alert(`${module} ëª¨ë“ˆ ìƒì„¸ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n\nìƒˆ ì°½ì—ì„œ ëª¨ë“ˆë³„ ìƒì„¸ ë¦¬í¬íŠ¸ê°€ ì—´ë¦½ë‹ˆë‹¤.`);
            // ì‹¤ì œ êµ¬í˜„: window.open(`module_detail.html?module=${module}`)
        }

        function drillDownFileType(fileType) {
            alert(`${fileType} íŒŒì¼ë“¤ì˜ ìƒì„¸ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n\ní•´ë‹¹ íŒŒì¼ íƒ€ì…ì˜ ìƒì„¸ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤.`);
        }

        function loadPage(pageNum) {
            // í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„
            document.querySelectorAll('.page-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            alert(`${pageNum}í˜ì´ì§€ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\n\në©”íƒ€DBì—ì„œ í•´ë‹¹ í˜ì´ì§€ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.`);
        }

        function searchComponents(query) {
            if (query.length > 2) {
                // ì‹¤ì‹œê°„ ê²€ìƒ‰ êµ¬í˜„
                console.log(`ê²€ìƒ‰ì–´: ${query}`);
                // ì‹¤ì œ êµ¬í˜„: ë©”íƒ€DBì—ì„œ LIKE ê²€ìƒ‰
            }
        }
    </script>
</body>
</html>
