<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SourceAnalyzer - ê³„ì¸µì  ì•„í‚¤í…ì²˜ ë§µ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; margin: 0; padding: 20px; background: #f8f9fa; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; text-align: center; }
        .architecture-controls { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .control-tabs { display: flex; gap: 5px; margin-bottom: 20px; }
        .tab { padding: 10px 20px; border: none; background: #e9ecef; cursor: pointer; border-radius: 5px 5px 0 0; }
        .tab.active { background: #007bff; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .module-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .module-card { background: #f8f9fa; padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .module-card:hover { background: #e3f2fd; transform: translateY(-2px); }
        .module-card.selected { background: #1976d2; color: white; }
        .module-name { font-weight: bold; font-size: 1.1em; margin-bottom: 5px; }
        .module-stats { font-size: 0.9em; opacity: 0.8; }
        .layer-view { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .layer-selector { max-height: 400px; overflow-y: auto; }
        .layer-item { padding: 12px; margin: 8px 0; background: #f8f9fa; border-radius: 5px; cursor: pointer; }
        .layer-item:hover { background: #e3f2fd; }
        .layer-item.selected { background: #1976d2; color: white; }
        .component-count { float: right; background: #007bff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; }
        .diagram-container { background: #fafafa; padding: 20px; border-radius: 8px; min-height: 400px; }
        .breadcrumb { background: #e9ecef; padding: 10px 15px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9em; }
        .breadcrumb a { color: #007bff; text-decoration: none; cursor: pointer; }
        .breadcrumb a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ—ï¸ ê³„ì¸µì  ì•„í‚¤í…ì²˜ ë§µ</h1>
        <p>ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ ëŒ€ì‘ - ëª¨ë“ˆë³„ ë“œë¦´ë‹¤ìš´ ì•„í‚¤í…ì²˜ ë¶„ì„</p>
        <p><strong>EnterpriseApp</strong> | 15ê°œ ëª¨ë“ˆ | 234ê°œ í´ë˜ìŠ¤ | 1,567ê°œ ë©”ì„œë“œ</p>
    </div>

    <div class="architecture-controls">
        <div class="control-tabs">
            <button class="tab active" onclick="switchTab('overview')">ğŸ“Š ì „ì²´ ê°œìš”</button>
            <button class="tab" onclick="switchTab('module')">ğŸ¢ ëª¨ë“ˆë³„ ë¶„ì„</button>
            <button class="tab" onclick="switchTab('layer')">ğŸ—ï¸ ë ˆì´ì–´ë³„ ë¶„ì„</button>
            <button class="tab" onclick="switchTab('dependency')">ğŸ”— ì˜ì¡´ì„± ë¶„ì„</button>
        </div>

        <!-- ì „ì²´ ê°œìš” íƒ­ -->
        <div id="overview-tab" class="tab-content active">
            <h4>ğŸ¯ ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”</h4>
            <div class="module-grid">
                <div class="module-card" onclick="selectModule('user')">
                    <div class="module-name">ğŸ‘¤ ì‚¬ìš©ì ê´€ë¦¬</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 45ê°œ | ë©”ì„œë“œ: 234ê°œ | JSP: 23ê°œ</div>
                </div>
                <div class="module-card" onclick="selectModule('product')">
                    <div class="module-name">ğŸ›ï¸ ìƒí’ˆ ê´€ë¦¬</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 67ê°œ | ë©”ì„œë“œ: 345ê°œ | JSP: 34ê°œ</div>
                </div>
                <div class="module-card" onclick="selectModule('order')">
                    <div class="module-name">ğŸ“¦ ì£¼ë¬¸ ì²˜ë¦¬</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 89ê°œ | ë©”ì„œë“œ: 456ê°œ | JSP: 45ê°œ</div>
                </div>
                <div class="module-card" onclick="selectModule('payment')">
                    <div class="module-name">ğŸ’³ ê²°ì œ ì²˜ë¦¬</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 34ê°œ | ë©”ì„œë“œ: 178ê°œ | JSP: 12ê°œ</div>
                </div>
                <div class="module-card" onclick="selectModule('inventory')">
                    <div class="module-name">ğŸ“Š ì¬ê³  ê´€ë¦¬</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 23ê°œ | ë©”ì„œë“œ: 123ê°œ | JSP: 18ê°œ</div>
                </div>
                <div class="module-card" onclick="selectModule('admin')">
                    <div class="module-name">âš™ï¸ ê´€ë¦¬ì</div>
                    <div class="module-stats">í´ë˜ìŠ¤: 56ê°œ | ë©”ì„œë“œ: 289ê°œ | JSP: 67ê°œ</div>
                </div>
            </div>
        </div>

        <!-- ëª¨ë“ˆë³„ ë¶„ì„ íƒ­ -->
        <div id="module-tab" class="tab-content">
            <div class="breadcrumb">
                <a onclick="goHome()">ğŸ  ì „ì²´</a> > 
                <a onclick="selectModule('user')">ğŸ‘¤ ì‚¬ìš©ì ê´€ë¦¬</a> > 
                <span id="currentView">Controller ë ˆì´ì–´</span>
            </div>
            
            <div class="layer-view">
                <div class="card">
                    <h4>ğŸ“‹ ë ˆì´ì–´ ì„ íƒ</h4>
                    <div class="layer-selector">
                        <div class="layer-item selected" onclick="selectLayer('controller')">
                            ğŸ® Controller ë ˆì´ì–´
                            <span class="component-count">8</span>
                        </div>
                        <div class="layer-item" onclick="selectLayer('service')">
                            âš™ï¸ Service ë ˆì´ì–´
                            <span class="component-count">12</span>
                        </div>
                        <div class="layer-item" onclick="selectLayer('dao')">
                            ğŸ’¾ DAO ë ˆì´ì–´
                            <span class="component-count">6</span>
                        </div>
                        <div class="layer-item" onclick="selectLayer('model')">
                            ğŸ“¦ Model ë ˆì´ì–´
                            <span class="component-count">15</span>
                        </div>
                        <div class="layer-item" onclick="selectLayer('frontend')">
                            ğŸ–¥ï¸ Frontend ë ˆì´ì–´
                            <span class="component-count">23</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h4 id="layerTitle">ğŸ® Controller ë ˆì´ì–´ ìƒì„¸</h4>
                    <div class="diagram-container">
                        <div class="mermaid">
flowchart TD
    subgraph "ì‚¬ìš©ì_ê´€ë¦¬_Controllers"
        UC1["UserController<br/>15ê°œ ë©”ì„œë“œ"]
        UC2["UserProfileController<br/>8ê°œ ë©”ì„œë“œ"]
        UC3["UserAuthController<br/>6ê°œ ë©”ì„œë“œ"]
    end
    
    subgraph "API_Endpoints"
        API1["/api/user/*<br/>12ê°œ ì—”ë“œí¬ì¸íŠ¸"]
        API2["/api/profile/*<br/>5ê°œ ì—”ë“œí¬ì¸íŠ¸"]
        API3["/api/auth/*<br/>4ê°œ ì—”ë“œí¬ì¸íŠ¸"]
    end
    
    subgraph "Service_Layer"
        US1["UserService"]
        US2["ProfileService"]
        US3["AuthService"]
    end
    
    UC1 --> API1
    UC2 --> API2
    UC3 --> API3
    
    UC1 --> US1
    UC2 --> US2
    UC3 --> US3
    
    style UC1 fill:#e3f2fd
    style UC2 fill:#e3f2fd
    style UC3 fill:#e3f2fd
    style US1 fill:#fff3e0
    style US2 fill:#fff3e0
    style US3 fill:#fff3e0
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë ˆì´ì–´ë³„ ë¶„ì„ íƒ­ -->
        <div id="layer-tab" class="tab-content">
            <h4>ğŸ—ï¸ ì „ì²´ ë ˆì´ì–´ êµ¬ì¡° (ê°„ì†Œí™” ë·°)</h4>
            <div class="chart-container">
                <canvas id="layerOverviewChart"></canvas>
            </div>
        </div>

        <!-- ì˜ì¡´ì„± ë¶„ì„ íƒ­ -->
        <div id="dependency-tab" class="tab-content">
            <h4>ğŸ”— ì˜ì¡´ì„± ë¶„ì„ (TOP 20ë§Œ í‘œì‹œ)</h4>
            <p>ì „ì²´ 15,234ê°œ ì»´í¬ë„ŒíŠ¸ ì¤‘ ì˜ì¡´ì„±ì´ ë†’ì€ ìƒìœ„ 20ê°œë§Œ í‘œì‹œ</p>
            <div class="chart-container">
                <canvas id="dependencyChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({startOnLoad: true});

        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // ëª¨ë“ˆ ì„ íƒ
        function selectModule(module) {
            document.querySelectorAll('.module-card').forEach(card => card.classList.remove('selected'));
            event.target.classList.add('selected');
            
            alert(`${module} ëª¨ë“ˆì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.\n\ní•´ë‹¹ ëª¨ë“ˆì˜ ìƒì„¸ ì•„í‚¤í…ì²˜ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.`);
            switchTab('module');
        }

        // ë ˆì´ì–´ ì„ íƒ
        function selectLayer(layer) {
            document.querySelectorAll('.layer-item').forEach(item => item.classList.remove('selected'));
            event.target.classList.add('selected');
            
            document.getElementById('currentView').textContent = layer + ' ë ˆì´ì–´';
            document.getElementById('layerTitle').textContent = `ğŸ® ${layer} ë ˆì´ì–´ ìƒì„¸`;
        }

        // ë ˆì´ì–´ ê°œìš” ì°¨íŠ¸
        const layerCtx = document.getElementById('layerOverviewChart').getContext('2d');
        new Chart(layerCtx, {
            type: 'radar',
            data: {
                labels: ['Frontend', 'API', 'Controller', 'Service', 'DAO', 'Model'],
                datasets: [{
                    label: 'ì»´í¬ë„ŒíŠ¸ ë°€ë„',
                    data: [234, 156, 89, 167, 78, 123],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    pointBackgroundColor: 'rgba(54, 162, 235, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: { beginAtZero: true }
                }
            }
        });

        // ì˜ì¡´ì„± TOP 20 ì°¨íŠ¸
        const depCtx = document.getElementById('dependencyChart').getContext('2d');
        new Chart(depCtx, {
            type: 'bar',
            data: {
                labels: ['UserService', 'OrderService', 'ProductService', 'PaymentService', 'AuthService', 'InventoryService', 'NotificationService', 'ReportService'],
                datasets: [{
                    label: 'ì˜ì¡´ì„± ì ìˆ˜',
                    data: [95, 87, 82, 76, 71, 68, 45, 34],
                    backgroundColor: ['#dc3545', '#dc3545', '#ffc107', '#ffc107', '#ffc107', '#28a745', '#28a745', '#28a745']
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true, max: 100 }
                }
            }
        });

        function goHome() {
            switchTab('overview');
        }
    </script>
</body>
</html>
